<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hida's Thoughts</title>
<style>
body { font-family: sans-serif; max-width: 600px; margin: auto; padding: 20px; background: #fafafa; }

h1 { text-align: center; color: #333; }
p {text-align:center;}

form { background: #fff; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

input, textarea, button { width: 95%; padding: 10px; margin: 5px 0; border-radius: 5px; border: 1px solid #ccc; }

button { background: #000; color: white; font-weight: bold; cursor: pointer; }

button:hover { background: #000fff; }

.accordion { background: #eee; cursor: pointer; padding: 10px; margin: 5px 0; border-radius: 5px; border: 1px solid #ccc; transition: 0.2s; }

.accordion:hover { background: #ddd; }

.panel { padding: 10px; display: none; border: 1px solid #ccc; border-top: none; border-radius: 0 0 5px 5px; background: #fff; }

#accordionContainer {margin-top: 15px;}

</style>
</head>
<body>

<h1>Hida's Thoughts</h1>
<p>This is Hida's Log. Build with HARGH! and ChatGPT.<br> Only me can post on this page. Hi! o/</p>


<form id="form">
  <input type="date" id="tanggal" required>
  <input type="text" id="judul" placeholder="Judul" required>
  <textarea id="text" placeholder="Tulis disini..." required></textarea>
  <button type="submit">Submit</button>
</form>


<div id="accordionContainer"></div>

<script>
const url = 'https://script.google.com/macros/s/AKfycbxx-70r6_nJrRB6A9n1odb0Xx3KSuycwud_oyKhp1O3maPYbNMMRcXAFZxPpKPeIuGD/exec';
const container = document.getElementById('accordionContainer');
const form = document.getElementById('form');

// Submit form ke Google Apps Script
form.addEventListener('submit', e=>{
  e.preventDefault();
  const tanggal = document.getElementById('tanggal').value;
  const judul = document.getElementById('judul').value;
  const text = document.getElementById('text').value;

  fetch(url, {
    method: 'POST',
    body: new URLSearchParams({tanggal, judul, text})
  }).then(res=>{
    form.reset();
    loadData();
  });
});

// Fetch data dari Sheet â†’ tampilkan accordion (urut terbaru di atas)
function loadData(){
  fetch(url)
    .then(res=>res.json())
    .then(data=>{
      container.innerHTML = '';
      
      data.reverse().forEach(t => {
  // Format tanggal
  let date = new Date(t.tanggal);
  let formattedDate = ("0" + date.getDate()).slice(-2) + "." +
                      ("0" + (date.getMonth()+1)).slice(-2) + "." +
                      date.getFullYear().toString().slice(-2);

  const acc = document.createElement('div');
  acc.className = 'accordion';
  acc.textContent = formattedDate + ' - ' + t.judul;

  const panel = document.createElement('div');
  panel.className = 'panel';
  panel.textContent = t.text;

  acc.onclick = () => {
    panel.style.display = panel.style.display==='block'?'none':'block';
  }

  container.appendChild(acc);
  container.appendChild(panel);
});

    });
}

// Load saat pertama kali
loadData();
</script>

</body>
</html>
